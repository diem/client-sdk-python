version: 2.0

jobs:
  build:
    docker:
      - image: circleci/rust:stretch
    steps:
      - checkout
      - run:
          name: Setup
          command: |
            sudo sh -c 'echo "deb http://deb.debian.org/debian stretch-backports main" > /etc/apt/sources.list.d/backports.list'
            sudo apt-get update
            sudo apt-get install -y cmake build-essential
      - run:
          name: Build libra-dev
          working_directory: libra-dev
          command: |
            cargo build
      - run:
          name: Build everything else
          command: |
            mkdir build
            cd build
